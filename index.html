<!DOCTYPE html>
<html>
<head>
  <title>Simple Tracker</title>
</head>

<body>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyXXXX",
    authDomain: "iit-warrior-tracker.firebaseapp.com",
    projectId: "iit-warrior-tracker",
    appId: "1:763090319429:web:70e73610d06c140e484b2c"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  window.googleLogin = function () {
    signInWithPopup(auth, provider)
      .then((result) => {
        alert("Logged in as " + result.user.email);
      })
      .catch((error) => {
        alert(error.message);
      });
  };
</script>

  <h2>My Tracker</h2>

  <button onclick="login()">Login with Google</button>
  <br><br>

  <input id="track" placeholder="Enter today progress">
  <button onclick="saveData()">Save</button>

  <!-- FIREBASE CODE -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup } 
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, collection, addDoc } 
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ðŸ”´ REPLACE THIS WITH YOUR FIREBASE CONFIG
    apiKey: "AIzaSyBssk6eCvGv-uhTGql4-eT8RRlyGlDU5oQ",
  authDomain: "iit-warrior-tracker.firebaseapp.com",
  projectId: "iit-warrior-tracker",

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const provider = new GoogleAuthProvider();
    let user = null;

    window.login = async () => {
      const res = await signInWithPopup(auth, provider);
      user = res.user;
      alert("Logged in as " + user.email);
    };

    window.saveData = async () => {
      if (!user) {
        alert("Login first");
        return;
      }

      const value = document.getElementById("track").value;

      await addDoc(collection(db, "tracker"), {
        uid: user.uid,
        value: value,
        time: new Date()
      });

      alert("Saved to Firebase âœ…");
    };
  </script>

</body>
</html>
